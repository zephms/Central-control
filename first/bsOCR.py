# data64 = "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"
# data:image/png;base64,

import base64
import cv2
import numpy as np

class dyOCR():
    def __init__(self):
        from cnocr import CnOcr
        self.ocr = CnOcr()
    
    def resFromFilePath(self, fp):
        get = self.ocr.ocr(fp)
        if get==[]:
            return "-1 暂时不能识别"
        get = "".join(get[0])
        get = get.replace("o", "0")
        get = get.replace("O", "0")
        return get

    def resFromB64(self, b64):
        img_data = base64.b64decode(b64)
        # nparr = np.fromstring(img_data, np.uint8)
        nparr = np.frombuffer(img_data, np.uint8)
        img_np = cv2.imdecode(nparr, cv2.IMREAD_COLOR)
        get = self.ocr.ocr(img_np)
        if get==[]:
            return "-1 暂时不能识别"
        get = "".join(get[0])
        get = get.replace("o", "0")
        get = get.replace("O", "0")
        return get

# ocr = dyOCR()

# print(ocr.resFromB64(data64))
